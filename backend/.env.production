# Gera chaves
FERNET_KEY=$(python3 - <<'PY'
from cryptography.fernet import Fernet
print(Fernet.generate_key().decode())
PY
)
SECRET_KEY=$(python3 - <<'PY'
import secrets
print(secrets.token_urlsafe(48))
PY
)

# Cria backend/.env (edite manualmente se quiser valores diferentes)
cat > backend/.env <<EOF
MYSQL_DATABASE=brazcom_db
MYSQL_USER=occ
MYSQL_PASSWORD=Altavista740
MYSQL_ROOT_PASSWORD=uma-senha-root-forte-aqui

DATABASE_URL=mysql+pymysql://\${MYSQL_USER}:\${MYSQL_PASSWORD}@db:3306/\${MYSQL_DATABASE}
CERTIFICATES_DIR=/etc/ssl/nfcom
CORS_ORIGINS=https://www.brazcom.com.br,https://brazcom.com.br,http://localhost:3015
SECRET_KEY=${SECRET_KEY}
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=43200
NFCOM_AMBIENTE=homologacao
ROUTER_ENCRYPTION_KEY=${FERNET_KEY}
EOF

chmod 600 backend/.env